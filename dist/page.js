window.$page=function(e,t){"use strict";for(var n=function(e){for(var t={},n=e.split("/"),a=[],r=[],o=0,i=n.length;i>o;o++){var d=n[o];d=d.replace(/\{:(.+)\}/,"([^/]+?)"),a.push(d),RegExp.$1.length&&r.push(RegExp.$1)}var u=a.join("/"),f=u.substring(u.length-1,u.length);return"/"==f&&(u=u.substring(0,u.length-1)),u="^"+u+"/?$",t.regex=new RegExp(u),t.map=r,t},a=Object.keys(e),r=[],o=a.length,i=0;o>i;i++){var d=a[i],u=n(d),f={matcher:u,data:e[d],route:d};r.push(f)}"undefined"!=typeof t.templateEngine;var g=function(e){for(var t=0,n=r.length;n>t;t++){var a=r[t],o=a.matcher;if(o.regex.test(e)){for(var i={},d=0,u=o.map.length;u>d;d++)i[o.map[d]]=RegExp["$"+(d+1)];if("undefined"==typeof a.data.handler){console.error("No handler defined for route: "+a.route);break}a.data.handler.bind(this)(i,a);break}}},p=window.location.pathname;g(p);var s=function(e){window.history.pushState(null,null,e),g(e)};"undefined"!=typeof t.hijackLinks&&t.hijackLinks===!0&&document.body.addEventListener("click",function(e){if("a"===e.target.tagName.toLowerCase()){var t="";return t="undefined"!=typeof e.target.dataset.getAttribute?e.target.dataset.getAttribute("href"):e.target.dataset.href,s(t),e.preventDefault(),e.stopPropagation(),!1}},!0);var h=function(){g(window.location.pathname)};window.addEventListener("popstate",function(){h()})};