window.$page=function(e,t){"use strict";for(var n=function(e){for(var t={},n=e.split("/"),a=[],r=[],o=0,i=n.length;i>o;o++){var d=n[o];d=d.replace(/\{:(.+)\}/,"([^/]+?)"),a.push(d),RegExp.$1.length&&r.push(RegExp.$1)}var f=a.join("/"),u=f.substring(f.length-1,f.length);return"/"==u&&(f=f.substring(0,f.length-1)),f="^"+f+"/?$",t.regex=new RegExp(f),t.map=r,t},a=Object.keys(e),r=[],o=a.length,i=0;o>i;i++){var d=a[i],f=n(d),u={matcher:f,data:e[d],route:d};r.push(u)}"undefined"!=typeof t&&"undefined"!=typeof t.templateEngine;var p=function(e,t){"undefined"==typeof t&&(t=!1);for(var n=0,a=r.length;a>n;n++){var o=r[n],i=o.matcher;if(i.regex.test(e)){for(var d={},f=0,u=i.map.length;u>f;f++)d[i.map[f]]=RegExp["$"+(f+1)];if("undefined"==typeof o.data.handler){console.error("No handler defined for route: "+o.route);break}o.data.handler.bind(this)(d,o,t);break}}},g=window.location.pathname;p(g);var s=function(e){window.history.pushState(null,null,e),p(e)};"undefined"!=typeof t&&"undefined"!=typeof t.hijackLinks&&t.hijackLinks===!0&&document.body.addEventListener("click",function(e){if("a"===e.target.tagName.toLowerCase()){var t="";return t="undefined"!=typeof e.target.dataset.getAttribute?e.target.dataset.getAttribute("href"):e.target.dataset.href,s(t),e.preventDefault(),e.stopPropagation(),!1}},!0);var h=function(){p(window.location.pathname,!0)};window.addEventListener("popstate",function(){h()});var l=p;return l};